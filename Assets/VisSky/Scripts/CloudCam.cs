using UnityEngine;
using System.Collections;

public class CloudCam : MonoBehaviour {
//----------------------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------------------

    public Texture   cloud_render_texture = null;
    public Texture2D cloud_texture2d = null;

    public Material cloudMaterial;

    VisSky visky;

//----------------------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------------------
void Awake()
{
    visky = GameObject.Find("VisSky").GetComponent<VisSky>();
}
//----------------------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------------------
void OnPreRender()
{
    cloudMaterial.SetColor("_TintColor", new Color(0.83f , 0.83f, 0.83f, 0.25f));
}
//----------------------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------------------
void OnPostRender()
{
    cloud_texture2d.ReadPixels(new Rect(0,0, 16, 16),  0,0, false);         
    cloud_texture2d.Apply();

    cloudMaterial.SetColor("_TintColor", visky.cloudColor);
}
//----------------------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------------------
}
